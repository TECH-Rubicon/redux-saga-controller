"use strict";(self.webpackChunkredux_saga_controller=self.webpackChunkredux_saga_controller||[]).push([[411],{9705:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>r,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>c});var a=t(4848),o=t(8453);const i={sidebar_position:0},r="TypeScript",l={id:"app-example/app-example-ts",title:"TypeScript",description:"More information about controller data check here.",source:"@site/../docs/app-example/app-example-ts.md",sourceDirName:"app-example",slug:"/app-example/app-example-ts",permalink:"/docs/app-example/app-example-ts",draft:!1,unlisted:!1,editUrl:"https://github.com/TECH-Rubicone/redux-saga-controller/edit/master/docs/intro.md/../docs/app-example/app-example-ts.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{sidebar_position:0},sidebar:"tutorialSidebar",previous:{title:"useControllerSubscribe",permalink:"/docs/hooks/use-controller-subscribe"},next:{title:"JavaScript",permalink:"/docs/app-example/app-example-js"}},s={},c=[{value:"controller.ts",id:"controllerts",level:4},{value:"index.ts",id:"indexts",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"typescript",children:"TypeScript"}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["More information about ",(0,a.jsx)(n.strong,{children:"controller data"})," check ",(0,a.jsx)(n.a,{href:"/docs/api-reference/controller-data/data",children:(0,a.jsx)(n.code,{children:"here"})}),"."]})}),"\n",(0,a.jsx)("iframe",{width:"100%",height:"500",src:"https://codesandbox.io/embed/app-example-ts-tyvv5?fontsize=14&hidenavigation=1&theme=dark&view=editor",title:"app-example-ts",allow:"accelerometer; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"}),"\n",(0,a.jsx)(n.h4,{id:"controllerts",children:"controller.ts"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"import { Action } from 'redux';\nimport { takeEvery, put, select, delay } from 'redux-saga/effects';\nimport { Controller, ActionCreators, ActionCreator, create } from 'redux-saga-controller';\n// import createController, { Controller, ActionCreators, ActionCreator } from 'redux-saga-controller';\n\n// NOTE action shortcut\ninterface Act<Payload> extends Action {\n  payload: Payload\n}\n\n// NOTE IMPORTANT!\n// You should add interface only if you will use select effect from redux-saga\n// In all cases except select effect you don't need it\n// It because redux-saga effect select return \"any\" in all cases\ntype UserData = {\n  name: string;\n  age: number;\n  [key: string]: unknown\n}\ninterface IInitial {\n  initialized: boolean;\n  disabled: boolean;\n  data: UserData | null\n}\n// NOTE action payloads\ninterface InitializePayload {\n  some: string;\n}\ninterface SomePayload {\n  id: number | string;\n  name?: string;\n}\ntype GetSelfPayload = { id: string | number };\n// You should add interface for actions its only one way to define payload annotation\ninterface IActions extends ActionCreators<IInitial> {\n  initialize: ActionCreator<InitializePayload>;\n  someAction: ActionCreator<SomePayload>;\n  getSelf: ActionCreator<GetSelfPayload>;\n}\n\nexport const controller:Controller<IActions, IInitial> = create({\n  // NOTE Prefix should be unique for each controller\n  prefix: 'defaultPrefix',\n  actions: ['initialize', 'getSelf'],\n  initial: {\n    initialized: false,\n    disabled: true,\n    data: null\n  },\n  subscriber: function * () {\n    yield takeEvery(controller.action.initialize.TYPE, initializeSaga);\n    yield takeEvery(controller.action.getSelf.TYPE, getSelfSaga);\n  },\n});\n\n// NOTE Example of usage redux sagas\nfunction * initializeSaga ({ type, payload } : Act<InitializePayload>) {\n  // NOTE bring reducer to initial state before start initialization\n  yield put(controller.action.clearCtrl());\n  const { initialized }: IInitial = yield select(controller.select);\n  // NOTE emulate request\n  yield delay(3e3);\n  const data = {\n    age: 30,\n    name: '',\n    the: 'initail',\n    request: 'data',\n  };\n  yield put(controller.action.updateCtrl({ data }));\n  // NOTE emulate request\n  yield delay(3e3);\n  // NOTE update any property of entire controller reducer \"IInitial\"\n  yield put(controller.action.updateCtrl({ initialized: true, disabled: false }));\n}\n\nfunction * getSelfSaga ({ type, payload } : Act<GetSelfPayload>) {\n  yield put(controller.action.updateCtrl({ disabled: true }));\n  // NOTE emulate request\n  yield delay(3e3);\n  const data = {\n    id: payload.id,\n    name: 'John',\n    age: 30,\n  };\n  // NOTE update any property of entire controller reducer\n  yield put(controller.action.updateCtrl({ data, disabled: false }));\n}\n"})}),"\n",(0,a.jsx)(n.h4,{id:"indexts",children:"index.ts"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'import { controller } from \'./controller\';\nimport React, { useEffect, useCallback} from \'react\';\nimport { useController } from \'redux-saga-controller\';\n\nfunction App() {\n  const [\n    { data, disabled, initialized }, // initial data from your redux state\n    { initialize, getSelf }, // action creators\n  ] = useController(controller);\n\n  useEffect(() => { initialize({ some: \'probably route data for initialization\'}) }, [initialize]);\n  const handleGetData = useCallback(() => getSelf({ id: 1 }), [getSelf]);\n\n  return <div className="container">\n    { !initialized ? <img src={logo} className="logo" alt="logo" /> : <>\n    <h2> DATA </h2>\n    <p> { JSON.stringify(data) } </p>\n    <button className="btn" disabled={disabled} onClick={handleGetData}>\n      { disabled ? <img src={logo} className="logo" alt="logo" /> : <span> GET </span> }\n    </button>\n    </> }\n  </div>;\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>l});var a=t(6540);const o={},i=a.createContext(o);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);