"use strict";(self.webpackChunkredux_saga_controller=self.webpackChunkredux_saga_controller||[]).push([[248],{143:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=t(4848),o=t(8453);const r={sidebar_position:1},i="JavaScript",l={id:"app-example/app-example-js",title:"JavaScript",description:"More information about controller data check here.",source:"@site/../docs/app-example/app-example-js.md",sourceDirName:"app-example",slug:"/app-example/app-example-js",permalink:"/docs/app-example/app-example-js",draft:!1,unlisted:!1,editUrl:"https://github.com/TECH-Rubicone/redux-saga-controller/edit/master/docs/intro.md/../docs/app-example/app-example-js.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"TypeScript",permalink:"/docs/app-example/app-example-ts"}},s={},c=[{value:"controller.js",id:"controllerjs",level:4},{value:"index.js",id:"indexjs",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h4:"h4",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"javascript",children:"JavaScript"}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["More information about ",(0,a.jsx)(n.strong,{children:"controller data"})," check ",(0,a.jsx)(n.a,{href:"/docs/api-reference/controller-data/data",children:(0,a.jsx)(n.code,{children:"here"})}),"."]})}),"\n",(0,a.jsx)("iframe",{width:"100%",height:"500",src:"https://codesandbox.io/embed/app-example-ts-tyvv5?fontsize=14&theme=dark&view=editor",title:"app-example-js",allow:"accelerometer; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"}),"\n",(0,a.jsx)(n.h4,{id:"controllerjs",children:"controller.js"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"import { create } from 'redux-saga-controller';\nimport { takeEvery, put, select, delay } from 'redux-saga/effects';\n\nexport const controller = create({\n  // NOTE Prefix should be unique for each controller\n  prefix: 'defaultPrefix',\n  // NOTE Types for which action creators will be generated\n  actions:   {\n    initialize: 'init',\n    getSelf: 'getSelf', \n    someAction: 'someAction',\n  },\n  // NOTE Initial data for your redux state\n  initial: {\n    initialized: false,\n    disabled: true,\n    data: null\n  },\n  // NOTE root subscriber of controller\n  subscriber: function * () {\n    yield takeEvery(controller.action.initialize.TYPE, initializeSaga);\n    yield takeEvery(controller.action.getSelf.TYPE, getSelfSaga);\n  },\n});\n\n// NOTE Example of usage redux sagas\nfunction * initializeSaga ({ type, payload }) {\n  // NOTE bring reducer to initial state before start initialization\n  yield put(controller.action.clearCtrl());\n  const { initialized } = yield select(controller.select);\n  // NOTE emulate request\n  yield delay(3e3);\n  const data = {\n    age: 30,\n    name: '',\n    the: 'initail',\n    request: 'data',\n  };\n  yield put(controller.action.updateCtrl({ data }));\n  // NOTE emulate request\n  yield delay(3e3);\n  // NOTE update any property of entire controller reducer \"IInitial\"\n  yield put(controller.action.updateCtrl({ initialized: true, disabled: false }));\n}\n\nfunction * getSelfSaga ({ type, payload }) {\n  yield put(controller.action.updateCtrl({ disabled: true }));\n  console.log(`%c ${type} `, 'color: #FF6766; font-weight: bolder; font-size: 12px;'\n    , '\\n let assume its request ;):', payload\n  );\n  // NOTE emulate request\n  yield delay(3e3);\n  const data = {\n    id: payload.id,\n    name: 'John',\n    age: 30,\n  };\n  // NOTE update any property of entire controller reducer\n  yield put(controller.action.updateCtrl({ data, disabled: false }));\n}\n\n"})}),"\n",(0,a.jsx)(n.h4,{id:"indexjs",children:"index.js"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'import { controller } from \'./controller\';\nimport { useController } from \'redux-saga-controller\';\nimport React, { useCallback, useEffect } from \'react\';\n\nfunction App() {\n  const [{ data, disabled, initialized }, // initial data from your redux state\n    { initialize, getSelf }, // action creators\n  ] = useController(controller);\n\n  useEffect(() => { initialize({ some: \'probably route data for initialization\'}) }, [initialize]);\n  const handleGetData = useCallback(() => getSelf({ id: 1 }), [getSelf]);\n\n  return <div className="container">\n    { !initialized ? <img src={logo} className="logo" alt="logo" /> : <>\n      <h2> DATA </h2>\n      <p> { JSON.stringify(data) } </p>\n      <button className="btn" disabled={disabled} onClick={handleGetData}>\n        { disabled ? <img src={logo} className="logo" alt="logo" /> : <span> GET </span> }\n      </button>\n    </> }\n  </div>;\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var a=t(6540);const o={},r=a.createContext(o);function i(e){const n=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),a.createElement(r.Provider,{value:n},e.children)}}}]);